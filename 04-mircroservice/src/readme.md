# Book Finder

![](public/demo.gif?raw=true)

### Design Note

The project is divided into two parts. All the API endpoints are powered by Laravel framework and all the UI rendering part is managed by AngularJS in a single page. The goal of the project should be easy to be tested (with Unit Tests, Integrated Tests), high availablity (use ``/ping`` to check from different locations), easy deployment (Heroku in this project), easy to maintain (with certain Coding Standard and proper documentations), can be scaled up and down. 

However, this is not a production ready solution yet.

* CSS/JS assets need to be combined, minized, versionized properly for better server and browser side caching
* API endpoints need to be authenticated ~~or throttled~~
* More security configurations (e.g. CORS)
* Stress testing to see the performance before deployment

### Features

* Support both ISBN 10 and 13
* Support comma seperated queries for multiple ISBNs 
* RESTfull API backend and AngularJS frontend, can be easily deployed and scaled
* Query cached and real time stats generated by Redis
* PSR-2 Compliant

### Dependencies

* PHP: >= 5.5
* laravel/framework: >= 5.2
* packbackbooks/textbook-prices >= 0.1.4
* predis/predis >= 1.0

### API Endpoints

| Method        | URI           | Description                        |
| ------------- |:--------------| ----------------------------------:|
| GET           | /ping         | return pong if system is live      |
| GET           | /book/stats   | book ISBN search stats             |
| GET           | /book/search  | search book price from ValoreBooks |

### Demo

- [Heroku Live Demo](https://arcane-ridge-53698.herokuapp.com/)

### Local Development

```sh
$ # Set up vargant and virtual box first
$ vagrant box add laravel/homestead
$ composer global require "laravel/homestead=~2.0"
$ # Edit homestead configuration file according to https://laravel.com/docs/5.2/homestead
$ vagrant up
$ # Clone Repo
$ git clone URLofTheRepo
$ cd Path/To/Src/Folder
$ composer install
$ # Open http://localhost:8000 start local testing
```

### Tests and Coding Style Checking

```sh
$ ./vendor/bin/phpunit
$ ./vendor/squizlabs/php_codesniffer/scripts/phpcs -p --extensions=php --standard=PSR2 --error-severity=1 --warning-severity=0 ./app
```

### Deploy

```sh
$ heroku create
$ heroku heroku plugins:install heroku-redis
$ heroku config:set BOOK_VALORE=XXX
$ heroku config:set APP_KEY=XXX
$ heroku config:set REDIS_HOST=XXXX
$ heroku config:set REDIS_PORT=XXXX
$ heroku config:set REDIS_PASSWORD=XXXX
$ git push heroku master
$ heroku ps:scale web=1
$ heroku open
```

On Click Deployment To Heroku

[![Deploy](https://www.herokucdn.com/deploy/button.svg)](https://heroku.com/deploy)

### References

- [HeroKu Need To Be Told It's PHP Not Node.JS](https://brendancodes.wordpress.com/2015/06/22/heroku-needs-to-be-told-its-php-not-node-js/)
- [Homestead for Local Development](https://laravel.com/docs/5.2/homestead)
- [ISBN Wiki](https://en.wikipedia.org/wiki/International_Standard_Book_Number)
